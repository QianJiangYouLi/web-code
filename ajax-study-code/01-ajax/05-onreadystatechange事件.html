<!DOCTYPE html>
<html lang="zh-CN">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<meta http-equiv="X-UA-Compatible" content="ie=edge" />
	<title>onreadystatechange</title>
</head>
<body>
<script>
	/**
	 * onload事件 :  服务器响应之后执行 ( 一次请求,只会执行一次 )
	 * onreadystatechange事件 : xhr请求状态变化会执行 ( 一次请求，会执行多次 )
	 * 0: 请求未初始化  (open之前)
	 * 1: 服务器连接已建立 (open之后)
	 * 2: 请求已接收 ( 服务器已经收到你的请求 )
	 * 3: 请求处理中 ( 服务器正在处理你的请求 )
	 * 4: 请求已完成，且响应已就绪 ( 服务器完成响应, onload事件就是在这里执行 )
	 */
	let xhr = new XMLHttpRequest()
	// 请求未初始化
	console.log(xhr.readyState) // => 0
	xhr.open('post', 'http://www.liulongbin.top:3009/api/login')
	// 服务器连接已建立
	console.log(xhr.readyState) // => 1
	xhr.setRequestHeader('Content-type', 'application/x-www-form-urlencoded')
	// 发送请求 ： 参数格式  'key=value'
	xhr.send('username=admin&password=123456')
	xhr.onload = () => {
		console.log(xhr.readyState) // 4
		if (xhr.readyState === 4) {
			console.log(xhr.response)
		}
	}
</script>
</body>
</html>
